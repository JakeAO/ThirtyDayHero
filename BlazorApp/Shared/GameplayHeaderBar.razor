@using SadPumpkin.Games.ThirtyDayHero.BlazorApp.States

@inject IStateMachine StateMachine;
@inject IContext Context;

<div style="display: flex;justify-content: space-between;background-color: darkgray">
    <div style="float: left">
        <img src="assets/gold.png" alt="Gold" style="max-width: 32px;max-height: 32px"/>@_party.Gold
    </div>
    <div style="float: right">
        <b>Days Remaining: </b>@(30-_party.Day)
    </div>
    <div style="float: right">
        <b>Time: </b>@_party.Time.ToString()
    </div>
</div>

@code 
{
    private PartyDataWrapper _party;

    protected override void OnInitialized()
    {
        _party = Context.Get<PartyDataWrapper>();
        _party.Updated += PartyOnUpdated;
    }

    private void PartyOnUpdated(object sender, EventArgs e)
    {
        InvokeAsync(StateHasChanged);
    }
}